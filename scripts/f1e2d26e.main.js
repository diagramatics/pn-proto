(function(){"use strict";var a;a=angular.module("writePrototype",["ui.router","textAngular","contenteditable","firebase","wu.masonry","ngSanitize"]),a.config(["$stateProvider","$urlRouterProvider",function(a,b){b.otherwise("/"),a.state("main",{url:"/",templateUrl:"partials/main.html",controller:"MainController as mainCtrl"}).state("write",{url:"/write",templateUrl:"partials/write.html",controller:"WriteController as writeCtrl"}).state("writeProto",{url:"/write-proto",templateUrl:"partials/write-proto.html",controller:"WriteProtoController"}).state("post",{url:"/posts/{post:[0-9]{1,8}}",templateUrl:"partials/post.html",controller:"PostController as postCtrl"})}]),a.controller("MainController",["$scope",function(a){var b,c;c=this,b=new Firebase("https://boiling-torch-577.firebaseio.com/posts/"),this.posts={},b.once("value",function(b){return c.posts=b.val(),a.$apply()})}]),a.controller("PostController",["$scope","$stateParams",function(a,b){var c,d;d=this,c=new Firebase("https://boiling-torch-577.firebaseio.com/posts/post_"+b.post),this.post={},c.once("value",function(b){return d.post=b.val(),console.log(d.post),a.$apply()})}]),a.controller("WriteController",["$scope","$state","$timeout",function(a,b,c){this.submit=0,this.postData=function(){var d,e,f,g;return e=0,this.title||(this.title="An untitled post"),g=this,g.submit=1,f=new Firebase("https://boiling-torch-577.firebaseio.com/posts/"),d=new Firebase("https://boiling-torch-577.firebaseio.com/config"),d.once("value",function(h){return e=h.val().postCount+1,f.child("post_"+e).set({title:g.title,content:g.editor,url:e},function(f){return f?void 0:(d.child("postCount").transaction(function(a){return a+1}),g.submit=2,g.postNumber=e,a.$apply(),c(function(){return b.go("post",{post:e})},3e3))})})}}]),a.controller("WriteProtoController",function(){var a;return a={}})}).call(this),function(){"use strict";angular.module("writePrototype").directive("editorPlaceholder",["$interval","$animate",function(a){return{restrict:"EA",link:function(b,c){var d,e;return b.text=["Write things here","Write stuff here","Write write write"],e=function(){return c.text(b.text[0]),b.text.push(b.text.shift())},e(),d=a(e,7500)}}}]).directive("editorMain",function(){return{restrict:"E",link:function(a,b){var c;return c=function(){return b.addClass("focused")},b.attr("contenteditable",!0),b.on("focus",c)}}})}.call(this);